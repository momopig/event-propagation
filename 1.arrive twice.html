<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>arrive twice</title>
    <link rel="stylesheet" href="css/common.css">
</head>
<body>
    <div class="wrapper">
        <div class="station" id='station1'>
            station1
            <div class="station" id='station2'>
                station2
                <div class="station" id='station3'>
                    station3
                    <div class="station" id='station4'>
                        station4(click me)
                    </div>
                </div>
            </div>
        </div>
    </div>
    <p>总结（仅station3绑定了事件）：</p>
    <p>1. 每个dom元素都可以看成是"公交路线"的一个巴士站，在"公交路线"的一次往返（分别在Capturing方向和Bubbling方向），巴士会经停两次；</p>
    <p>2. 每一个事件listener可以看作是一个乘客, 当一个listener（乘客）的setCapture设置为true时，那么其会在bus第一次经停所在station时（即在Capturing方向），上车（执行）；
    <p>   为false时，会在bus第二次经停所在station时（即在Bubbling方向），上车（执行）;</p>
    <p>3. 当事件被触发时，如果一个dom元素有多个listener需要执行，那么其执行顺序遵循"先上车（绑定到dom元素）先执行"原则；</p>
    <script type='text/javascript'>
        var s3 = document.getElementById('station' + 3);
        var order = 1;
        s3.addEventListener('click',function(){
            console.log('Capturing direction: station3: passenger1' + ':the order of getting on bus is ' + order++);
        },true);

        s3.addEventListener('click',function(){
            console.log('Capturing direction:  station3: passenger2' + ':the order of getting on bus is ' + order++);
        },true);

        s3.addEventListener('click',function(){
            console.log('Capturing direction:  station3: passenger3' + ':the order of getting on bus is ' + order++);
        },true);

        s3.addEventListener('click',function(){
            console.log('Bubbling direction:  station3: passenger4' + ':the order of getting on bus is ' + order++);
        },false);

        s3.addEventListener('click',function(){
            console.log('Bubbling direction:  station3: passenger5' + ':the order of getting on bus is ' + order++);
        },false);

        s3.addEventListener('click',function(){
            console.log('Bubbling direction:  station3: passenger6' + ':the order of getting on bus is ' + order++);
        },false);
    </script>
</body>
</html>